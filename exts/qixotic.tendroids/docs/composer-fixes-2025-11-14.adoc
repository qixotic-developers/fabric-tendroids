= Composer Configuration Fixes - 2025-11-14
:toc:
:toclevels: 2

== Issues Fixed

=== Issue 1: Import Error - Module Not Found

**Error**: `ModuleNotFoundError: No module named 'qixotic.tendroids.warp_test.test_controller'`

**Root Cause**: The `warp_test/__init__.py` was importing archived modules that were moved to `_archived/` directory.

**Fix**: Updated `warp_test/__init__.py` to only import production modules:
- Removed imports of archived test controllers and helpers
- Kept only: `WarpTestWindow`, `MemoryMonitor`, `CppBatchTestController`, `CppBatchMeshUpdater`, `create_cylinder_mesh`

**Files Modified**:
- `C:\Dev\Omniverse\fabric-tendroids\exts\qixotic.tendroids\qixotic\tendroids\warp_test\__init__.py`

=== Issue 2: Materials Browser Showing

**Problem**: Materials browser tab was appearing in bottom left panel

**Fix**: Disabled Materials browser in kit configuration
- Set `enabled = false` in `[settings.exts."omni.kit.browser.material"]`
- Updated layout to hide Materials window
- Moved Materials to hidden windows list

**Files Modified**:
- `C:\Dev\Omniverse\omni-tendroids\source\apps\qixotic.usd_composer.kit`
- `C:\Dev\Omniverse\omni-tendroids\source\extensions\qixotic.usd_composer_setup_extension\layouts\tendroids.json`

=== Issue 3: Extensions Window Search Filter

**Problem**: Extensions window showed `@feature` filter instead of `qixotic` with wrong category

**Fix**: Added Extensions window configuration
- Set `filterText = "qixotic"` for default search
- Set `categorySelected = "THIRD PARTY"` for default category

**Files Modified**:
- `C:\Dev\Omniverse\omni-tendroids\source\apps\qixotic.usd_composer.kit`

**New Settings**:
[source,toml]
----
[settings.exts."omni.kit.window.extensions"]
filterText = "qixotic"
categorySelected = "THIRD PARTY"
----

=== Issue 4: Ground Plane Creation

**Problem**: Composer was creating `ground` mesh and `groundCollider` plane on startup

**Root Cause**: Default stage template includes ground plane primitives

**Fix**: Changed stage template from `None` to `"Empty"`
- Modified `__new_stage()` method in setup extension
- Uses empty template instead of default template with ground plane

**Files Modified**:
- `C:\Dev\Omniverse\omni-tendroids\source\extensions\qixotic.usd_composer_setup_extension\qixotic\usd_composer_setup_extension\extension.py`

**Code Change**:
[source,python]
----
# Before
stage_templates.new_stage(template=None)

# After  
stage_templates.new_stage(template="Empty")
----

=== Issue 5: Window Not Fullscreen

**Problem**: Composer window opened at fixed size (1920x1080) instead of fullscreen

**Fix**: Added `maximized = true` to window settings
- Set window position to `x = 0, y = 0`
- Added `maximized = true` flag

**Files Modified**:
- `C:\Dev\Omniverse\omni-tendroids\source\apps\qixotic.usd_composer.kit`

**New Settings**:
[source,toml]
----
[settings.app.window]
x = 0
y = 0
maximized = true
----

== Updated Layout

=== Tendroids Layout Structure

The layout has been refined to remove bottom left panel entirely:

[cols="1,2,3"]
|===
| Panel | Position | Windows

| Toolbar
| Far Left (narrow)
| Main ToolBar

| Viewport
| Center/Left (expanded)
| Viewport - now larger without bottom panel

| Stage + Custom
| Top Right
| • Stage (default) +
  • Render Settings +
  • Tendroid Controls

| Console + Extensions
| Bottom Right
| • Console (default) +
  • Extensions (qixotic filter)
|===

=== Hidden Windows

All these windows are now hidden by default:
- Content
- Materials
- Environments
- Configurator Samples
- Variant Presenter
- Property
- Layer

These can still be opened via Window menu if needed.

== Files Modified Summary

=== Tendroids Extension

* `qixotic/tendroids/warp_test/__init__.py` - Fixed imports

=== Composer Configuration

* `source/apps/qixotic.usd_composer.kit` - Settings updates:
  ** Disabled Materials browser
  ** Added Extensions window configuration
  ** Set window to fullscreen

* `source/extensions/qixotic.usd_composer_setup_extension/qixotic/usd_composer_setup_extension/extension.py` - Code updates:
  ** Changed stage template to "Empty"

* `source/extensions/qixotic.usd_composer_setup_extension/layouts/tendroids.json` - Layout updates:
  ** Removed bottom left panel (Materials)
  ** Expanded viewport to full left side
  ** Moved Materials to hidden windows

== Documentation

* `docs/composer-configuration.adoc` - Existing documentation remains valid
* `docs/composer-fixes-2025-11-14.adoc` - This document

== Testing

After these fixes, Composer should:

✅ Launch without import errors
✅ Show NO Materials browser tab
✅ Extensions window filtered to "qixotic" in THIRD PARTY
✅ Create empty stage (no ground plane)
✅ Open fullscreen/maximized
✅ Show clean layout with viewport, stage, console, extensions

== Next Steps

. Rebuild/restart Composer to test all fixes
. Verify Tendroid Controls window appears in top right
. Confirm no ground plane is created
. Test that Extensions window shows qixotic.tendroids

== Notes

All disabled windows can be re-enabled via:
- Window menu in Composer
- Uncommenting extensions in kit file
- Modifying layout JSON

Ground plane can be added manually if needed via Create menu.

'''

*All Issues Fixed* +
*Import Error*: Resolved ✅ +
*Materials Hidden*: Done ✅ +
*Extensions Filter*: Configured ✅ +
*No Ground Plane*: Fixed ✅ +
*Fullscreen*: Enabled ✅
