= API Reference
:navtitle: API Reference

Core classes and interfaces for geo-sub-optix.

== SampleRenderer

Primary interface to the OptiX rendering pipeline.

[source,cpp]
----
class SampleRenderer {
public:
    SampleRenderer(const IcosahedronTriangleMesh& model);
    
    void render();
    void resize(const vec2i& newSize);
    void downloadPixels(uint32_t h_pixels[]);
    void setCamera(const Camera& camera);
};
----

=== Constructor

[source,cpp]
----
SampleRenderer(const IcosahedronTriangleMesh& model)
----

Creates renderer and initializes OptiX pipeline.

Initialization sequence:

. Initialize OptiX runtime
. Create CUDA/device context
. Compile PTX module
. Create program groups
. Build acceleration structure
. Assemble pipeline
. Build shader binding table

=== render()

Renders one frame using current camera and mesh.

* Updates launch parameters
* Invokes OptiX launch
* Results written to GPU color buffer

=== resize()

[source,cpp]
----
void resize(const vec2i& newSize)
----

Resizes framebuffer to match window dimensions.

=== downloadPixels()

[source,cpp]
----
void downloadPixels(uint32_t h_pixels[])
----

Copies rendered pixels from GPU to CPU array.

=== setCamera()

[source,cpp]
----
void setCamera(const Camera& camera)
----

Updates camera for next render pass.

== IcosahedronTriangleMesh

Triangle mesh data structure.

[source,cpp]
----
struct IcosahedronTriangleMesh {
    std::vector<vec3f> vertex;  // Vertex positions
    std::vector<vec3i> index;   // Triangle indices
    vec3f color;                // Material color
};
----

== Subdivider Classes

Abstract base and concrete subdivision implementations.

[source,cpp]
----
class SubdividerBase {
public:
    virtual IcosahedronTriangleMesh subdivide(
        const IcosahedronTriangleMesh& mesh
    ) = 0;
};

class Subdivider0 : public SubdividerBase { /* ... */ };
class Subdivider1A : public SubdividerBase { /* ... */ };
class Subdivider1B : public SubdividerBase { /* ... */ };
class Subdivider2A : public SubdividerBase { /* ... */ };
class Subdivider3A : public SubdividerBase { /* ... */ };
----

Each subdivider splits triangles into 4 sub-triangles using different strategies.

== Camera

Simple camera model.

[source,cpp]
----
struct Camera {
    vec3f from;  // Camera position
    vec3f at;    // Look-at point
    vec3f up;    // Up vector
};
----

== CUDABuffer

GPU memory wrapper.

[source,cpp]
----
class CUDABuffer {
public:
    void alloc(size_t size);
    void free();
    
    template<typename T>
    void upload(const T* data, size_t count);
    
    template<typename T>
    void download(T* data, size_t count);
    
    CUdeviceptr d_pointer() const;
    size_t sizeInBytes() const;
};
----

== LaunchParams

Parameters passed to OptiX device programs.

[source,cpp]
----
struct LaunchParams {
    uint32_t* colorBuffer;
    vec2i fbSize;
    
    vec3f camera_pos;
    vec3f camera_dir;
    vec3f camera_horizontal;
    vec3f camera_vertical;
    
    OptixTraversableHandle traversable;
};
----
