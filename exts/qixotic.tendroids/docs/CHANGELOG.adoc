= Tendroids Changelog
:toc:

== Version 2.0.0 (November 8, 2025) - Warp GPU Implementation

=== Major Architectural Rewrite

This version represents a complete clean restart with focus on GPU-accelerated deformation and material safety.

==== New Core Features

*GPU-Accelerated Vertex Deformation*
* NVIDIA Warp kernel for smooth breathing animation
* Raised cosine envelope for organic bulge effect
* Radial-only displacement (X, Z axes)
* CUDA memory management
* CPU fallback support

*Material Safety System*
* Automatic glass material detection
* Periodic checking (every 30 frames)
* Animation blocking when unsafe materials detected
* Clear status messaging and logging
* Prevents GPU memory exceptions

*Clean Modular Architecture*
* Builder pattern for USD creation (TendroidBuilder)
* Factory pattern for instantiation (TendroidFactory)
* Lifecycle pattern for state management (TendroidLifecycle)
* Component-based design with single responsibilities
* All files within 100-150 line target (with justified exceptions)

==== Core Components

*Tendroid Class* (163 lines)
* Main controller with delegation
* Update loop with material safety checks
* Component initialization
* Lifecycle delegation

*WarpDeformer* (141 lines)
* GPU kernel implementation
* Smooth wave envelope
* Efficient vertex processing
* Memory management

*MaterialSafetyChecker* (131 lines)
* Keyword-based detection
* Periodic checking
* Animation blocking
* Status reporting

*BreathingAnimator* (152 lines)
* Single traveling bulge timing
* Wave position calculations
* Bubble emission detection
* Configurable parameters

*CylinderGenerator* (140 lines)
* Procedural mesh generation
* Flared base with easing
* Proper topology and normals
* Extent calculation

*TendroidBuilder* (143 lines)
* USD geometry creation
* Component initialization
* Material safety logging
* Error handling

*TendroidLifecycle* (125 lines)
* State management
* Activation with safety checks
* Parameter updates
* Cleanup operations

==== Scene Management

*TendroidSceneManager* (203 lines)
* High-level coordinator
* Batch and single creation
* Animation control
* Cleanup operations

*AnimationController* (97 lines)
* Update loop subscription
* Frame-by-frame updates
* Delta time handling
* Error handling

*TendroidFactory* (134 lines)
* Single creation with custom parameters
* Batch creation with randomization
* Position distribution
* Size variation

==== User Interface

*TendroidControlPanel* (101 lines)
* Main UI coordinator
* Component delegation
* Inter-component wiring
* Window lifecycle

*SpawnSettingsUI* (214 lines)
* Single/multi mode switching
* Conditional visibility
* Parameter controls
* Help text

*ActionButtons* (177 lines)
* Spawn button with mode detection
* Start/stop controls
* Clear all button
* Status integration

*StatusDisplay* (61 lines)
* Status messages
* Tendroid count
* Animation status
* Centralized updates

==== Utilities

*MathHelpers* (127 lines)
* smooth_step interpolation
* ease_out_quartic easing
* calculate_flare_radius
* calculate_wave_displacement
* calculate_wave_position

*MeshVertexUpdater* (57 lines)
* Direct USD points writes
* Error handling
* Validation methods

==== Code Quality Improvements

*Modular Design*
* 24 focused Python files
* ~1,400 total lines (vs 2,500+ in v1.0)
* 75% of files within 100-150 line target
* All files under 215 lines
* High cohesion, low coupling

*Clean Separation*
* Core: Geometry and deformation
* Animation: Timing and calculations
* Scene: Multi-creature management
* UI: User interaction
* Utils: Shared functionality

==== Performance Optimizations

* GPU-accelerated vertex deformation
* Periodic material checking (not per-frame)
* Efficient mesh updates
* Minimal CPU overhead
* Target: 60fps with 15 Tendroids

==== Known Issues Fixed

* ✅ GPU crashes with transparent materials (material safety system)
* ✅ Over-engineered codebase (clean restart, focused design)
* ✅ Poor file organization (modular structure with size limits)
* ✅ Unclear architecture (clear patterns and delegation)

==== Removed Features (From v1.0)

* Transform-based segment animation (replaced with vertex deformation)
* Fabric fast-path updates (simplified to direct USD)
* Complex telemetry (removed as over-engineering)

==== Documentation

* PROJECT_OVERVIEW.adoc: Complete architectural documentation
* IMPLEMENTATION_STATUS.adoc: Current status and next steps
* README.adoc: User guide and API reference
* CHANGELOG.adoc: This file
* PlantUML diagrams: All regenerated to match new architecture

'''

== Version 1.0.0 (October 31, 2025) - Transform-Based Implementation

=== Initial Release

==== Features

*Transform-Based Breathing Animation*
* Per-segment radial scaling
* 16 cylindrical segments per Tendroid
* Individual Xform parents for each segment
* Traveling wave effect via scale animation
* Fabric fast-path with USD fallback

*Procedural Geometry*
* Cylinder mesh generation
* Flared base support
* Configurable segments and resolution
* Per-segment mesh creation

*Idle Motion*
* Subtle swaying animation
* Configurable amplitude and frequency
* Rotation and translation effects

*Multi-Tendroid Support*
* Scene management for multiple creatures
* Batch spawning with randomization
* Position distribution
* Size variation

*Simple UI*
* Omniverse UI control panel
* Spawn controls
* Animation parameters
* Clear/Remove operations

==== Architecture (v1.0)

*Folder Structure*
* core/: Tendroid and geometry
* animation/: Breathing and idle motion
* scene/: Manager and coordination
* ui/: Control panel
* utils/: Math helpers

*File Sizes (v1.0)*
* tendroid.py: 325 lines
* manager.py: 269 lines
* control_panel.py: 401 lines
* Total: ~2,500+ lines

==== Known Limitations (v1.0)

* Segment-based animation (not smooth vertex deformation)
* Large file sizes (over 150 lines)
* No material safety system
* Monolithic control panel
* Fabric integration complex

==== Performance (v1.0)

* Target: 60 fps with 15 Tendroids
* Transform updates only (no vertex operations)
* Fabric optimization where available
* Not extensively profiled

'''

== Development Timeline

[cols="1,2,2"]
|===
|Date |Version |Milestone

|October 31, 2025
|v1.0.0
|Initial transform-based implementation complete

|November 8, 2025
|v2.0.0
|Clean restart with Warp GPU deformation

|TBD
|v2.1.0
|Phase 2: Bubbles, flora, interaction

|TBD
|v3.0.0
|Phase 3: Advanced features and optimization
|===

== Future Roadmap

=== Version 2.1.0 (Phase 2 - Planned)

*Bubble System*
* Sphere prim creation at Tendroid top
* Physics simulation (buoyancy)
* Lifecycle management
* Transparent material with refraction

*Environmental Flora*
* Procedural seagrass/kelp generation
* Placement system
* Swaying animation
* Collision detection

*User Interaction*
* Mouse/controller input
* Raycasting for selection
* Physics response
* Visual feedback

*Advanced Materials*
* OmniPBR materials
* Subsurface scattering
* Proper transparency (after safety validation)
* Color variations

*Idle Motion Integration*
* Add to Tendroid class
* Apply to base Xform
* UI controls
* Parameter adjustment

=== Version 3.0.0 (Phase 3 - Future)

*Advanced Physics*
* Collision detection between Tendroids
* Environmental forces
* Realistic creature behavior

*Optimization*
* LOD system for >20 Tendroids
* Spatial culling
* Update throttling
* Performance profiling

*Visual Polish*
* Advanced lighting integration
* Post-processing effects
* Enhanced materials
* Camera effects

*Extensibility*
* Plugin system for custom animations
* Creature variations
* Custom behaviors
* Modding support

== Version History Summary

[cols="1,1,2"]
|===
|Version |Date |Summary

|1.0.0
|Oct 31, 2025
|Transform-based initial release, ~2,500 lines

|2.0.0
|Nov 8, 2025
|Warp GPU rewrite, material safety, ~1,400 lines
|===
