= CLion CMake Configuration Fix
:icons: font

== Problem

CLion cannot load Visual C++ environment from vcvarsall.bat.

== Solutions

=== Solution 1: Use Ninja Generator (Recommended)

Ninja doesn't require vcvarsall.bat and is faster.

. Open CLion Settings (Ctrl+Alt+S)
. Navigate to: *Build, Execution, Deployment → CMake*
. In your Release profile, set:
** *Generator:* Ninja
** *CMake options:*
+
----
-DKIT_SDK_PATH="C:/Users/qixot/AppData/Local/ov/pkg/composer-2024.1.0"
----

. Click *Apply* and *OK*
. CLion will automatically reconfigure

=== Solution 2: Use Visual Studio Generator with Toolchain Fix

. Open CLion Settings (Ctrl+Alt+S)
. Go to: *Build, Execution, Deployment → Toolchains*
. Find your Visual Studio toolchain
. Change *Architecture* from "amd64 8.1" to just "amd64"
. Click *Apply*
. Go back to *CMake* settings
. Set *Generator:* Visual Studio 17 2022
. Set *Toolchain:* Your fixed Visual Studio toolchain
. Click *Apply* and *OK*

=== Solution 3: Command Line Build (Bypass CLion)

If CLion configuration is problematic, just build from command line:

[source,bash]
----
cd C:\Dev\Omniverse\fabric-tendroids\exts\qixotic.tendroids\qixotic\tendroids\cpp
mkdir cmake-build-release
cd cmake-build-release
cmake .. -G "Ninja"
cmake --build . --config Release
----

Or use Visual Studio directly:

[source,bash]
----
cmake .. -G "Visual Studio 17 2022" -A x64
cmake --build . --config Release
----

== Recommended: Ninja Configuration

Create this configuration in CLion:

[cols="2,3"]
|===
|Setting |Value

|Name
|Release

|Build type
|Release

|Toolchain
|Default (or Visual Studio)

|Generator
|Ninja

|CMake options
|`-DKIT_SDK_PATH="C:/Users/qixot/AppData/Local/ov/pkg/composer-2024.1.0"`

|Build directory
|cmake-build-release
|===

== Why This Happens

The "8.1" in "amd64 8.1" refers to Windows SDK 8.1, which may not be installed. Ninja generator doesn't need this SDK specification.

== Verification

After fixing, you should see in CLion:

----
-- The C compiler identification is MSVC 19.44.35219.0
-- The CXX compiler identification is MSVC 19.44.35219.0
-- Configuring done
-- Generating done
-- Build files have been written to: ...
----

== If Still Failing

. Close CLion
. Delete these directories:
+
----
cpp/.idea
cpp/cmake-build-*
----
. Reopen CLion
. Follow Solution 1 (Ninja) above
